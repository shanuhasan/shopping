

<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
     <title>
           ANB POS  
        </title>
       
    
        <style>
       
       ul.paymentmethods li span {
            font-size: 15px;
        }
            .single_button_middle_holder .select2{width: 354px !important}
            #set_qty_alert_sms_setting{display: none;}
            #add_item_to_right{display: none;}
            .single_last_ten_sale{border-bottom: solid 1px #dad6d6;}
            .detail_holder a{color:black;}

            body{background-color:#E0E0E0;font-family: 'Yantramanav', sans-serif;color:#495057; margin:0px;		}
.fix{overflow:hidden;}
.floatleft{float:left;}
.special_textbox{width: 55px;height: 20px;border: 1px solid #dcdcdc;font-size: 12px;text-align: center;}
.specific_category_items_holder{display:none;};
.slimScrollBar{top:4px !important;width: 7px !important;}
.single_button_middle_holder button:focus, #search:focus{
	outline-color: rgb(77, 144, 254); 
outline-offset: -2px;
outline-style: auto;
outline-width: 1px;
}
textarea:focus, input:focus, button:focus,#plus_button{
    outline: none;
}
.bigdrop {
    width: 300px !important;
}
*:focus,#bottom_absolute .single_button_middle_holder button:focus{
    outline: none;
}
::-webkit-input-placeholder { /* Chrome/Opera/Safari */
  color: #dcdcdc;
}
::-moz-placeholder { /* Firefox 19+ */
  color: #dcdcdc;
}
:-ms-input-placeholder { /* IE 10+ */
  color: #dcdcdc;
}
:-moz-placeholder { /* Firefox 18- */
  color: #dcdcdc;
}
select{
	padding-left: 5px;
	-webkit-appearance: none;
	-moz-appearance: none;
	padding-right: 25px;
	background: url(data:image/gif;base64,R0lGODlhCwALAJEAAAAAAP///xUVFf///yH5BAEAAAMALAAAAAALAAsAAAIPnI+py+0/hJzz0IruwjsVADs=);
	background-repeat: no-repeat;
	background-position: 95% 42%;
}
button{
	border:0px solid;
	border-radius:5px;
	box-shadow: 1px 1px 1px 0px #909090;
	border: solid 1px #cacaca;
    line-height: 17px;
    font-size: 11px;
    padding: 7px 20px;
	background-color:#F3F3F3;
	cursor:pointer;
}
button:hover,.holder .operation_button:hover{
    background-color:#ccc;
}

.single_button_middle_holder{
    float:left;
    width:100%;
    /*width:33.33%;*/
    height:38px;
}
.cart_bottom_buttons{width:25%;}
.header_part_right .header_single_button_holder{float:left;width:24%;}
.single_button_middle_holder button{width:92%;}
.header_part_right .header_single_button_holder button{width:98%;font-size:11px;}
.header_part_right .header_single_button_holder button{
    margin-right: 2px;
}

.main_left,.main_middle,.main_right{background-color:#ffffff;float:left;border-radius:5px 5px 5px 5px;display:block;}
.main_left{width:14%;position:relative;/*margin-right:12px;*/}
.main_middle{
    width: 49%;
    margin-right: 1%;
    position: relative;
}
.main_right{
    width: 49%; float:right;
}

.main_top,.main_bottom{padding:5px;}
.main_top{padding-bottom:2px;padding-top:5px;}
.main_center{/*margin-top: 3px;*/margin-top: 0px;}
.main_bottom{margin-top:0px;}
.main_top .button_holder,.main_bottom .button_group{padding-bottom:3px;}
.main_bottom .button_group{padding-top:3px;margin-top:0px;}
.main_top .button_holder button,.main_bottom .button_group button{/*width:30%;*/border-radius:3px;line-height:29px;/*margin-right:2.5%;*/margin-top: 1px;}
.main_top .waiter_customer{margin-top:0px;}
.main_top select{height: 35px;width:99.6%;margin-top:10px;border: 1px solid #B5D6F6;}
.main_top .waiter_customer select{margin-left: 0px;/*width: 30%;*//*width:73%;*/width:85%;float: left;margin-right: 2px;margin-top: 0px;border: 1px solid #B5D6F6;}

.main_top .waiter_customer #table_button{
	float: right;
    width: 92%;
    line-height: 29px;
    border-radius: 4px;
    margin: 0px 2px 0px 0px;
}
.main_center table{width:100%;}
.main_center table tr th{font-size: 15px;font-weight: normal;background-color: #B5D6F6;height: 35px;}
.main_center table tr td{font-weight:normal;font-size:13px;margin: 0px;padding:6px 2px;}
.main_center table tr td p{font-size:15px;margin: 0px;line-height: 13px;}
#bottom_absolute table{width:100%;}
#bottom_absolute table tr td{font-weight:normal;font-size:13px;text-align:center;margin: 0px;padding:3px 2px;}
#bottom_absolute table tr td p{font-size:15px;margin: 0px;line-height: 13px;}
.main_right {padding:5px;}
.main_right #search{
	background-image: url(../images/search_icon.png);
    background-repeat: no-repeat;
    height: 25px;
    border: 1px solid #B5D6F6;
    border-radius: 3px;
    width: 43%;
    width: -moz-available;
    margin: 0px 0px 7px 0px;
    background-size: 14px;
    background-position: 8px;
    padding: 3px 0px 3px 30px;
    display: block;
    float:left;
    margin:0px 10px 0px 0px;
}

.main_right .select_category button{float:left;}
.main_right .select_category .category_next_prev{
	font-size: 30px;
    padding: 0px;
    box-shadow: none;
    border: 0px;
    border-radius: 0px;
    margin: 0px;
    float: left;
    background-color:#ffffff;
    width:5%;
    z-index:10;
    line-height:29px;
}
.main_right .select_category .select_category_inside{float:left;overflow:hidden;width:90%;}
.main_right .select_category .select_category_inside_inside{display:block;width:max-content;transition: .3s;width:-moz-max-content;}
.main_right .select_category .select_category_inside_inside button{
	border-right: solid 2px #DEDEDE;
	border-left:0px;
	border-bottom:0px;
	border-top:0px;
	border-radius:0px;
	line-height:14px;
	font-size:12px;
	padding:5px 10px;
	background-color:#ffffff;
	cursor:pointer;
	margin: 3px 0px 0px 0px;
}
.main_right .select_category {
	border: 1px solid #B5D6F6;
    border-radius: 5px;
	margin-bottom: 6px;
}
.main_right .category_items{margin: 0px 0px 0px 0px;height: 507px;overflow: auto;}
.main_right .category_items .single_item{
	width: 31%;
    float: left;
    margin-right: 1.2%;
    background-color: #B5D6F6;
    border-radius: 3px;
    border: 1px solid #BDBDBD;
	margin-bottom:6px;
    cursor:pointer;
    text-align: center;
}
.main_right .category_items .single_item img{max-width:100%;/* height:99px; */}
.main_right .category_items .single_item p{line-height:24px;margin:0px 0px 6px 0px;}
.main_right .category_items .single_item .item_name{font-weight:bold;text-align:center;font-size:14px;width: 200%;margin-left: -50%;transition: 2s;}
.main_right .category_items .single_item .item_price{text-align:center;font-size:12px;margin-top:6px;}


@media only screen and (min-width: 992px) and (max-width: 1199px) {
	/*.wrapper{width:996px;margin:0 auto;}*/
	.main_right .select_category .select_category_inside {width: 90%;}
	.main_middle {
	    width: 49%;
	    /* margin-right: 12px; */
	    /*margin-left: .9%;*/
	    margin-right: 1%;
	}
	.main_right {
	    width: 49%;
	}
	.header_part_left {
	    width: 49%;
        margin-right: 1%;
	}
	.header_part_left button {
	    margin-left: 0.1%;
	}
	.header_part_right {
	    width: 49.8%;
	}
    #help_button {
        float: right;
        margin-right: 4.4%;
        margin-left: 0px;
    }
	.header_part_right .header_single_button_holder button{width:98%;font-size:10px;}
}

/*		Tablet Layout: 768px.
			*/
@media only screen and (min-width: 768px) and (max-width: 991px) {
	/*.wrapper{width:750px;margin:0 auto;}*/
	.header_part_left {width: 100%;}
	.header_part_left button {margin-left: 0%;}
	.header_part_right { width: 100%;}
	.header_part_right button {margin-left: 0px;margin-right: 1px;}
	.main_left {width: 0%;margin-right: 0px;display:none;}
	.main_middle {width: 47%;margin-right: 12px;margin-left:0px;}
	.main_right {width: 50%;}
	.main_right #search {width: -webkit-fill-available;width: -moz-available;}
	.main_right .select_category .select_category_inside {width: 90%;}
	#help_button{float: right;margin-right: .3%;}
}

/*		Mobile Layout: 320px.
		 */

@media only screen and (max-width: 767px) {
	/*.wrapper{width:300px;margin:0 auto;}*/
	.main_left {width: 0%;margin-right: 0px;display:none;}
	.main_right {width: 0%;display:none;}
	.main_middle {width: 100%;margin-right: 0px;margin-left:0px;}
	.header_part_left {width: 100%;}
	.header_part_left button {margin-left: 0%;}
	.header_part_right { width: 100%;}
	.header_part_right button {margin-left: 0px;margin-right: 2px;width:99% !important;}
	.main_top .button_holder button, .main_bottom .button_group button {margin-right: 1.5%;font-size: 10px;}
	#help_button{float: right;margin-right: .4%;}
}
/*		Wide Mobile Layout: 480px.
		*/

@media only screen and (min-width: 480px) and (max-width: 767px) {
	/*.wrapper{width:460px;margin:0 auto;}*/
	.main_left {width: 0%;margin-right: 0px;display:none;}
	.main_right {width: 0%;display:none;}
	.main_middle {width: 100%;margin-right: 0px;}
	.header_part_left {width: 100%;}
	.header_part_left button {margin-left: 0%;}
	.header_part_right { width: 100%;}
	.header_part_right button {margin-left: 0px;margin-right: 2px;}
	#help_button{float: right;margin-right: .4%;}
}
tbody.order_holder.fix tr td {
    border-bottom: solid 1px grey;
}
span.remove {
    background: red;
    padding: 5%;
    border-radius: 33%;
    color: white;
    cursor: pointer;
}
input.qty {
    width: 76%;
}
.moretimes_item {
    text-align: center;
    /*border: solid 1px grey;*/
    border-radius: 1%;
    padding: 1%;
    cursor:pointer;
}
        </style>
        

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
  
    </head>
    <body>

    @foreach($errors->all() as $error) 
    <li>{{ $error }}</li> 
    @endforeach 
    
    @if(session()->has('message'))
    <div class="alert alert-success">
        {{ session()->get('message') }}
    </div>
@endif
        
    <div class="wrapper fix">
    <div id="main_part fix">
        <div class="row"><br>
        <div class="col-sm-6" align="right">
            <button type="button" class="btn btn-info btn-lg btn-sm" data-toggle="modal" data-target="#add_customer">Add customer</button>
        </div>
        </div>
        
        <form id="pos-form">
            @csrf
            <div class="main_middle fix" style="height: 100%;">
                
                <div class="main_top fix">
                    <div class="waiter_customer fix">
                        <div class="single_button_middle_holder fix">
                            <div style="margin:0 auto;" class="fix">
                                 <!--<form id="ordernumberdata" method="post" style="width: 27%; float: left">
                                        <input type="hidden" name="csrf_offpos" value="281730ac766b27fe9d84eadc4745b427">
                                        <input type="text" style="height: 33px;border: solid 1px #b5d6f6;" name="ordernumber" id="ordernumber" placeholder="Enter Order Number ">
                                </form>-->
                                <select id="walk_in_customer" name="customers" class="select2 select2-hidden-accessible" required>
                                    <!--<option value="">Customers</option>-->
                                    <?php foreach($customer as $value){ ?>
                                    <option value="<?=$value->id?>"><?=$value->first_name?> <?=$value->last_name?></option>
                                         <?php } ?>                            
                                    </select>
                            </div>
                        </div>
                    </div>
                </div>
     

                    <div class="main_center fix">
                        <div class="order_table_holder fix" style="height: 51%;overflow-y: scroll;">
                          
                            
                            <div class="order_holder1 fix">
                                <table width="100%">
                                <tbody>
                                    <tr>
                                    <th>Item</th>
                                    <th>Unit/unit value</th>
                                    <th>Color</th>
                                    <th>Size</th>
                                    <th>Price</th>
                                    <th style="width: 12%">Qty</th>
                                   
                                    <th>Total</th>
                                    <th>Action</th>
                                </tr>
                                </tbody>
                                <tbody class="order_holder fix">
                                   
                                    
                                </tbody>
                            </table>
                            </div>
                        </div>

                    </div>
                <div style="position: absolute;bottom: 1px;width: 100%" id="bottom_absolute">

                    <table cellspacing="0" cellpadding="0">
                            <tbody><tr style="background-color: #ffffff">
                                <th style="width:50%;text-align:left;padding-left:10px">&nbsp;</th>
                                <th style="width:10%;">&nbsp;</th>
                                <th style="width:15%;">&nbsp;</th>
                                <th style="width:10%;">&nbsp;</th>
                                <th style="width:15%;text-align:right;padding-right:10px;">&nbsp;</th>
                            </tr>
                              <tr style="background-color:#F5F5F5;">
                                <td></td>
                                <td style="font-weight:bold;text-align:right;" colspan="3">Discount  </td>
                                <td style="font-weight:bold;text-align:right;padding-right:10px;"><input type="number" min='0' name="discount" class="discount"></td>
                            </tr> <tr style="background-color:#F5F5F5;">
                                <td></td>
                                <td style="font-weight:bold;text-align:right;" colspan="3">Shipping</td>
                                <td style="font-weight:bold;text-align:right;padding-right:10px;"><input type="number" min='0' name="shipping" class="shipping"></td>
                            </tr>
                            <tr style="background-color:#F5F5F5;height:30px;">
                                <td style="padding-left:10px;font-weight:bold;text-align:left;">Total Item: <span id="total_items_in_cart">0</span></td>
                                <td style="font-weight:bold;text-align:right;" colspan="3">Sub Total</td>
                                <td style="font-weight:bold;text-align:right;padding-right:10px;">
                                    Rs <span id="sub_total_show">0.00</span><span id="sub_total" style="display:none;">0.00</span>
                                    <span id="total_item_discount" style="display:none">0</span><span id="discounted_sub_total_amount" style="display:none;">0.00</span>
                                </td>
                            </tr>
                           
                           
                            
                            <tr style="background-color:#F5F5F5;">
                                <td></td>
                                <td style="font-weight:bold;text-align:right;" colspan="3">Total Discount</td>
                                <td style="font-weight:bold;text-align:right;padding-right:10px;">Rs <span id="all_items_discount">0.00</span></td>
                            </tr> 
                            <tr style="background-color:#F5F5F5;">
                                <td></td>
                                <td style="font-weight:bold;text-align:right;" colspan="3">Shipping</td>
                                <td style="font-weight:bold;text-align:right;padding-right:10px;">Rs <span id="all_items_shipping">0.00</span></td>
                            </tr>
                            
                            <tr style="background-color: #D5E5F5;height: 35px;">
                                <td></td>
                                <td style="font-weight:bold;text-align:right;" colspan="3">Total Payable</td>
                                <td style="font-weight:bold;text-align:right;padding-right:10px;">Rs <span class="total_price">0.00</span><input type="hidden" name="total_payble" class="total_val_price"></td>
                            </tr>
                        </tbody></table>
                    <div class="main_bottom fix" style="padding-top:2px;">
                        <div class="button_group_update fix" style="display: none;">
                            <div class="otherupatevalue"></div>
                            <button class="btn updateorder" style="float: right;">Update Order</button> 
                        </div>
                        <div class="button_group fix">
                            <div class="single_button_middle_holder cart_bottom_buttons" style="width:33.2%;">
                                <button style="float:left;padding:0px 3px;" id="cancel_button"><i class="fas fa-times"></i> Cancel</button>
                            </div>
                           <!-- <div style="text-align:center;width:33.2%;" class="single_button_middle_holder cart_bottom_buttons">
                                <button id="hold_sale" style="padding:0px 3px;"><i class="fas fa-hand-rock"></i> Hold</button>
                            </div>-->
                            <div class="single_button_middle_holder cart_bottom_buttons" style="width:33.2%;">
                                <button type="submit" style="float:right;margin-right:2px;padding:0px 3px;" id="place_order_operation"><i class="fas fa-money-bill"></i> <span id="place_edit_order">Payment</span></button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            </form>
            
        <div class="main_right fix" style="height: auto;">
            
            <div class="right_side_search_add_item" style="width:-webkit-fill-available;height:40px;">
                <input type="text" style="height: 33px;" name="search" id="search" placeholder="Name">
                <a href="{{url('admin/dashboard')}}"><button class="category_button" data-id="all" style="border-left: solid 2px #DEDEDE;width: 50%;margin-bottom: 6px;background-color: #b5d6f6">Dashboard </button></a>
            </div>
                     

            <div style="position:relative;" id="main_item_holder">
                <table style="width: 100%">
                    <tbody>
                        <tr>
                            <td>
                                <div class="slimScrollDiv" style="position: relative; overflow: hidden; width: auto; height: 700px; background: none; border: 0px solid rgb(24, 64, 85);">
                                <div class="slimScrollDivCategory" style="overflow: scroll;width: auto;  max-height: 700px;">
                                    
                                    <button class="category_button" data-id="all" style="border-left: solid 2px #DEDEDE;width: 100%; margin-bottom: 6px;background-color: #b5d6f6">All</button>
                                   <?php foreach($category as $cat){
                                   if($cat->parent_id=='0'){
                                   ?>
                                   <button class="category_button" style="width: 100%;margin-bottom: 6px;background-color: #b5d6f6" data-id="<?=$cat->id?>"><?=$cat->category_name?></button>
                                 <?php } }?>
                                </div>
                                <div class="slimScrollBar" style="background: rgb(0, 0, 0); width: 7px; position: absolute; top: 0px; opacity: 0.4; display: none; border-radius: 7px; z-index: 99; right: 1px; height: 520px;"></div>
                                <div class="slimScrollRail" style="width: 7px; height: 100%; position: absolute; top: 0px; display: none; border-radius: 7px; background: rgb(51, 51, 51); opacity: 0.2; z-index: 90; right: 1px;"></div>
                                </div>

                        </td>
                        <td style="width: 80%">

                                <div  id="secondary_item_holder">
                                    <div class="slimScrollDiv" >
                                        <div class="category_items fix" >
                                            <div id="searched_item_found" class="specific_category_items_holder" style="display:block;">
                                            <?php foreach($all_products as $value){ ?>
                                                <div class="single_item fix" id="item_<?=$value['item_id']?>" data-name="<?=$value['service_name']?>" data-id="<?=$value['id']?>" data-item_id="<?=$value['item_id']?>" data-units="<?=$value['unit']?>/<?=$value['unit_value']?>" data-price="<?=$value['sale_price']?>" data-color="<?=$value['color']?>" data-size="<?=$value['size']?>" >
                                                   <p class="item_price">Rs <?=$value['sale_price']?></p><img src="<?php echo asset('/');?>uploads/service/<?=$value['image']?>" width="100%">
                                                    <p class="item_name"><?=$value['service_name']?></p>
                                                    <div class="more_items<?=$value['id']?>" style="display:none">
                                                    <?php foreach($value['items'] as $item){ ?>
                                                     <div class="col-md-6 moretimes_item moreitems<?=$value['id']?>" id="item_<?=$item->id?>" data-name="<?=$value['service_name']?>" data-id="<?=$value['id']?>" data-item_id="<?=$item->id?>" data-units="<?=$item->item_unit?>/<?=$item->item_unit_value?>" data-price="<?=$item->item_price?>" data-color="<?=$item->color?>" data-size="<?=$item->size?>" >
                                                   <img src="<?php echo asset('/');?>uploads/items/<?=$item->image?>" width="100%">
                                                   <p class="item_price" style="font-weight:700;margin-bottom:2px;">Rs <?=$item->item_price?></p>
                                                   <p class="item_price" style="margin-bottom:2px;"><?=$item->item_unit?>/<?=$item->item_unit_value?></p>
                                                    <p class="item_name" style="margin-bottom:2px;"><?=$value['service_name']?></p>
                                                     </div>
                                                    <?php } ?>
                                               
                                                </div>
                                                </div>
                                                
                                                <?php } ?>

                                            </div>   
                                        </div>
                                        
                                    </div>
                                </div>                                                           
                        </td>
                    </tr>
                </tbody>
            </table>

        </div>
        
        </div>
        
    </div>
    </div>

   <div id="add_customer" class="modal fade" role="dialog">
         <div class="modal-dialog"> 
         <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title">Add customer</h4>
          </div>
          
          <form method="POST" action="{{url('admin/customers/pos_create')}}" accept-charset="UTF-8" enctype="multipart/form-data" id="customer_form_b">
            @csrf
          <div class="modal-body">
                    
          <div class="col-lg-4 col-6">
            <div class="form-group">
              <label>First name</label> <span style="color:red">*</span>
              <input type="text" name="first_name" class="form-control" placeholder="First name" required>
            </div>
          </div>
          
          <div class="col-lg-4 col-6">
            <div class="form-group">
              <label>Last name</label>
              <input type="text" name="last_name" class="form-control" placeholder="Last name" required>
            </div>
          </div>
          
          <div class="col-lg-4 col-6">
            <div class="form-group">
              <label>Email</label> <span style="color:red">*</span>
              <input type="email" name="email" class="form-control" placeholder="Email" required>
            </div>
          </div>

        <div class="clearfix"></div>
    
          <div class="col-lg-4 col-6">
            <div class="form-group">
              <label>Phone</label>
              <input type="tel" name="phone" class="form-control" placeholder="Phone" required>
            </div>
          </div>

          <div class="col-lg-4 col-64">
            <div class="form-group">
              <label>Address</label> <span style="color:red">*</span>
              <input type="text" name="line_1"  placeholder="Address" class="form-control" required>
            </div>
          </div>

          <div class="col-lg-4 col-6">
            <div class="form-group">
              <label>Zip Code</label>
              <input type="text" name="zip_code" placeholder="Zip code (optional)" class="form-control">
            </div>
          </div>
          
          <div class="clearfix"></div>
            </div>
            <div class="modal-footer">
                <button type="submit" class="btn btn-default">Add customer</button>
            </div>
            
        </form>
             
        </div>
        </div>
        </div> 
  
  
<div id="myModal" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
     
      <div class="modal-body">
         <div id="searched_item_found" class="row moreitemsdata">
             </div>
      </div>
    
    </div>

  </div>
  </div>
  
  

  
<script src="<?php echo asset('/');?>assets/bacend/plugins/jquery/jquery.min.js"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
 
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script>
    $('body').on('click','.single_item',function(){
        var name=$(this).data('name');
        var id=$(this).data('id');
        var item_id=$(this).data('item_id');
        var units=$(this).data('units');
        var price=$(this).data('price');
        var color=$(this).data('color');
        var size=$(this).data('size');
        if($('.moreitems'+id).length>1){
            var itemhtml=$('.more_items'+id).html();
            $('.moreitemsdata').html(itemhtml);
            $('#myModal').modal('show');
        }else{
        var html='<tr class="trcount"><td><input type="hidden" name="product_id[]" value="'+id+'"> <input type="hidden" name="item_id[]" value="'+item_id+'"> <input type="hidden" name="price[]" value="'+price+'"><span style="display:none" class="item_id item_id'+item_id+'">'+item_id+'</span>'+name+'</td><td>'+units+'</td><td>'+color+'</td><td>'+size+'</td><td>'+price+' Rs</td><td><input type="number" name="qty[]" min="1" data-item_id="'+item_id+'" data-price="'+price+'" value="1" class="qty qty'+item_id+'"></td><td><input type="hidden" name="subtotal[]" class="value_subtotal'+item_id+'" value="'+price+'"><span class="show_subtotal show_subtotal'+item_id+'">'+price+'</span></td><td><span class="remove">remove</span></td></tr>';
        var itemcheck=document.querySelectorAll('.item_id');
        if($('.item_id').length>0){
        var existitem_id=$('.item_id'+item_id).text();
        if(existitem_id==item_id){
            $('.qty'+item_id).val(Number($('.qty'+item_id).val())+Number(1));
            $('.show_subtotal'+item_id).html(Number($('.qty'+item_id).val())*Number(price));
            $('.value_subtotal'+item_id).val(Number($('.qty'+item_id).val())*Number(price));
        }else{
             $('.order_holder').append(html);
        }
        }else{
            $('.order_holder').append(html); 
        }
        }
       
        
        allchanges();
    });$('body').on('click','.moretimes_item',function(){
        var name=$(this).data('name');
        var id=$(this).data('id');
        var item_id=$(this).data('item_id');
        var units=$(this).data('units');
        var price=$(this).data('price');
        var color=$(this).data('color');
        var size=$(this).data('size');
       
        var html='<tr class="trcount"><td><input type="hidden" name="product_id[]" value="'+id+'"> <input type="hidden" name="item_id[]" value="'+item_id+'"> <input type="hidden" name="price[]" value="'+price+'"><span style="display:none" class="item_id item_id'+item_id+'">'+item_id+'</span>'+name+'</td><td>'+units+'</td><td>'+color+'</td><td>'+size+'</td><td>'+price+' Rs</td><td><input type="number" name="qty[]" min="1" data-item_id="'+item_id+'" data-price="'+price+'" value="1" class="qty qty'+item_id+'"></td><td><input type="hidden" name="subtotal[]" class="value_subtotal'+item_id+'" value="'+price+'"><span class="show_subtotal show_subtotal'+item_id+'">'+price+'</span></td><td><span class="remove">remove</span></td></tr>';
        var itemcheck=document.querySelectorAll('.item_id');
        if($('.item_id').length>0){
        var existitem_id=$('.item_id'+item_id).text();
        if(existitem_id==item_id){
            $('.qty'+item_id).val(Number($('.qty'+item_id).val())+Number(1));
            $('.show_subtotal'+item_id).html(Number($('.qty'+item_id).val())*Number(price));
            $('.value_subtotal'+item_id).val(Number($('.qty'+item_id).val())*Number(price));
        }else{
             $('.order_holder').append(html);
        }
        }else{
            $('.order_holder').append(html); 
        }
    
       
        $('#myModal').modal('hide');
        allchanges();
    });
    function allchanges(){
        var discount=$('.discount').val();
        var shipping=$('.shipping').val();
  var subtotal=document.querySelectorAll('.show_subtotal');
 var sum=0;
  $.each(subtotal,function(index){
    sum += Number(subtotal[index].textContent);
  });
$('#sub_total_show').text(sum);
sum=Number(sum)+Number(shipping)-Number(discount);
$('.total_price').text(sum);
$('.total_val_price').val(sum);

}
$('.discount').keyup(function(){
     var discount=$('.discount').val();
    var shipping=$('.shipping').val();
    $('#all_items_discount').html(discount);
    $('#all_items_shipping').html(shipping);
    allchanges();
});$('.shipping').keyup(function(){
     var discount=$('.discount').val();
    var shipping=$('.shipping').val();
    $('#all_items_discount').html(discount);
    $('#all_items_shipping').html(shipping);
    allchanges();
});
$('#pos-form').submit(function(e){
     e.preventDefault();
                var formdata=new FormData(this);
                if(('.trcount').length>0){
                $.ajax({
                  url:'{{url("admin/createorders")}}',
                  type:'post',
                  data:formdata,
                  contentType: false,
                  cache: false,
                  processData:false,
                  success:function(data){
                      //alert(data);
                    window.location.href = '{{url("admin/order/view/")}}'+'/'+data;
                      //location.reload();
                   }
               });
                }else{
                    alert('Your Cart list is blank..');
                }
})
$('body').on('click','.remove',function(){
   $(this).parent('td').parent('tr').remove();
     allchanges();
});$('body').on('keyup','.qty',function(){
   var item_id=$(this).data('item_id');
   var price=$(this).data('price');
    $('.show_subtotal'+item_id).html(Number($('.qty'+item_id).val())*Number(price));
    $('.value_subtotal'+item_id).val(Number($('.qty'+item_id).val())*Number(price));
     allchanges();
});
$('.category_button').click(function(){
    var cat_id=$(this).data('id');
   $.ajax({
                  url:'{{url("admin/filter_product_bycategory")}}',
                  type:'get',
                  data:{'id':cat_id},
                  
                  success:function(data){
                    $('.specific_category_items_holder').html(data);
                   }
               });
});$('#search').keyup(function(){
    var value=$(this).val();
   $.ajax({
                  url:'{{url("admin/filter_product_byname")}}',
                  type:'get',
                  data:{'value':value},
                  
                  success:function(data){
                    $('.specific_category_items_holder').html(data);
                   }
               });
});
</script>